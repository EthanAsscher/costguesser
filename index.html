<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Cost Guesser ‚Äî How Much Does It Cost? Daily Price Guessing Game</title>

  <!-- Google Analytics ‚Äî replace TRACKING-ID with your actual ID -->
  <!--
  <script async src="https://www.googletagmanager.com/gtag/js?id=TRACKING-ID-HERE"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'TRACKING-ID-HERE');
  </script>
  -->

  <!-- Google Search Console -->
  <meta name="google-site-verification" content="VERIFICATION-CODE-HERE" />

  <meta name="description" content="Can you guess the price? From Big Macs to Bugattis, test your price intuition in this addictive daily guessing game. 6 guesses, higher/lower clues, one item per day.">
  <meta name="keywords" content="price guessing game, cost game, daily puzzle, wordle alternative, how much does it cost, trivia game">

  <meta property="og:title" content="Cost Guesser ‚Äî How Much Does It Cost?">
  <meta property="og:description" content="Can you guess the price? From Big Macs to Bugattis ‚Äî 6 guesses, daily challenge.">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://costguesser.com">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Cost Guesser ‚Äî How Much Does It Cost?">

  <link rel="canonical" href="https://costguesser.com">
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üí∞</text></svg>">

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=DM+Mono:wght@300;400;500&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

  <style>
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
    ::selection { background: rgba(22,163,74,0.15); }

    body {
      font-family: 'Inter', -apple-system, sans-serif;
      background: #fff;
      color: #111;
      min-height: 100vh;
      -webkit-font-smoothing: antialiased;
    }

    .container { max-width: 520px; margin: 0 auto; padding: 12px 20px 60px; }

    /* ‚îÄ‚îÄ Header ‚îÄ‚îÄ */
    .header { text-align: center; margin-bottom: 24px; }
    .header-accent { width: 40px; height: 4px; background: #16a34a; border-radius: 2px; margin: 0 auto 14px; }
    .header h1 {
      font-family: 'DM Mono', monospace; font-size: 32px; font-weight: 500;
      color: #111; letter-spacing: 4px;
    }
    .header-sub { font-size: 13px; color: #bbb; margin-top: 6px; letter-spacing: 1px; }

    /* ‚îÄ‚îÄ Stats ‚îÄ‚îÄ */
    .stats {
      display: flex; justify-content: center; gap: 20px;
      padding: 8px 0 14px; margin-bottom: 12px;
      border-bottom: 1px solid #f0f0f0;
    }
    .stat { text-align: center; }
    .stat-num { font-family: 'DM Mono', monospace; font-size: 20px; font-weight: 500; color: #111; }
    .stat-label { font-size: 9px; letter-spacing: 2px; text-transform: uppercase; color: #ccc; margin-top: 2px; }
    .stat-div { width: 1px; height: 20px; background: #f0f0f0; align-self: center; }

    /* ‚îÄ‚îÄ Product Card ‚îÄ‚îÄ */
    .product-card {
      background: #fafafa; border: 1px solid #f0f0f0; border-radius: 12px;
      padding: 24px 20px 20px; margin-bottom: 16px; text-align: center;
    }
    .product-emoji { font-size: 48px; margin-bottom: 10px; animation: pulse 3s ease-in-out infinite; }
    .product-category {
      font-size: 10px; font-weight: 600; letter-spacing: 3px;
      text-transform: uppercase; color: #16a34a; margin-bottom: 8px;
    }
    .product-name { font-size: 20px; font-weight: 600; color: #111; line-height: 1.35; }

    /* ‚îÄ‚îÄ Hint ‚îÄ‚îÄ */
    .hint-card {
      background: #f8fffe; border: 1px solid #d1fae5; border-radius: 8px;
      padding: 10px 16px; margin-bottom: 12px; text-align: center;
      animation: fadeIn 0.3s ease-out;
    }
    .hint-label { font-size: 9px; font-weight: 600; letter-spacing: 2px; text-transform: uppercase; color: #16a34a; margin-bottom: 3px; }
    .hint-text { font-size: 13px; color: #555; line-height: 1.5; }

    /* ‚îÄ‚îÄ Slider ‚îÄ‚îÄ */
    .slider-area { margin-bottom: 16px; padding: 0 4px; }
    .price-display {
      text-align: center; margin-bottom: 14px;
    }
    .price-value {
      font-family: 'DM Mono', monospace; font-size: 44px; font-weight: 500;
      color: #111; letter-spacing: -1px; line-height: 1;
      transition: color 0.15s; user-select: none;
    }
    .price-value.dragging { color: #16a34a; }
    .price-hint {
      font-size: 11px; color: #aaa; letter-spacing: 2px;
      text-transform: uppercase; margin-top: 6px;
    }

    .slider-track {
      position: relative; height: 44px; cursor: pointer;
      user-select: none; touch-action: none; margin-bottom: 6px;
    }
    .slider-rail {
      position: absolute; top: 18px; left: 0; right: 0; height: 8px;
      border-radius: 4px; background: #f0f0f0; overflow: hidden;
    }
    .slider-fill {
      position: absolute; top: 0; left: 0; height: 100%;
      background: linear-gradient(90deg, #bbf7d0, #16a34a);
    }
    .slider-thumb {
      position: absolute; top: 8px; width: 24px; height: 24px;
      border-radius: 50%; background: #22c55e; border: 3px solid #fff;
      box-shadow: 0 2px 6px rgba(0,0,0,0.15);
      transform: translateX(-50%); z-index: 5; cursor: grab;
      transition: all 0.1s ease;
    }
    .slider-thumb.dragging {
      width: 28px; height: 28px; background: #16a34a;
      box-shadow: 0 0 16px rgba(22,163,74,0.4), 0 2px 8px rgba(0,0,0,0.15);
      transition: none;
    }

    .fine-tune {
      display: flex; justify-content: center; gap: 6px; margin-top: 4px;
    }
    .fine-btn {
      padding: 4px 16px; background: #fafafa; border: 1px solid #e5e5e5;
      border-radius: 4px; color: #666; font-size: 14px;
      font-family: 'DM Mono', monospace; cursor: pointer; transition: all 0.15s;
    }
    .fine-btn:hover { background: #f0f0f0; border-color: #ccc; }

    /* ‚îÄ‚îÄ Submit ‚îÄ‚îÄ */
    .guess-btn {
      display: block; width: 100%; padding: 15px 0;
      background: #16a34a; border: none; border-radius: 8px;
      color: #fff; font-size: 15px; font-family: 'DM Mono', monospace;
      font-weight: 500; letter-spacing: 1px; cursor: pointer;
      transition: all 0.2s ease; box-shadow: 0 2px 8px rgba(22,163,74,0.2);
    }
    .guess-btn:hover { background: #15803d; transform: translateY(-1px); }
    .guess-counter { text-align: center; margin-top: 8px; font-size: 11px; color: #ccc; letter-spacing: 1px; }

    /* ‚îÄ‚îÄ Guess History ‚îÄ‚îÄ */
    .guesses-label {
      font-size: 10px; font-weight: 600; letter-spacing: 2px;
      text-transform: uppercase; color: #ddd; margin-bottom: 8px; text-align: center;
    }
    .guess-row {
      display: flex; align-items: center; padding: 10px 14px; border-radius: 8px;
      background: #fafafa; border: 1px solid #f0f0f0; margin-bottom: 6px;
      animation: slideIn 0.3s ease-out;
    }
    .guess-row.correct { background: #f0fdf4; border-color: #bbf7d0; }
    .guess-num { font-size: 11px; color: #bbb; margin-right: 12px; min-width: 20px; }
    .guess-price { font-family: 'DM Mono', monospace; font-size: 17px; font-weight: 500; color: #111; min-width: 90px; }
    .guess-feedback { flex: 1; display: flex; justify-content: flex-end; align-items: center; gap: 8px; }
    .guess-heat { font-size: 11px; font-weight: 600; letter-spacing: 1px; text-transform: uppercase; }
    .guess-dir { font-size: 13px; color: #888; }
    .guess-dir strong { color: #444; }
    .guess-arrow { font-size: 14px; }
    .guess-correct-label { color: #16a34a; font-weight: 700; letter-spacing: 1px; font-size: 13px; }

    /* ‚îÄ‚îÄ Empty State ‚îÄ‚îÄ */
    .empty-state { text-align: center; padding: 24px 20px; }
    .empty-icon { font-size: 28px; margin-bottom: 10px; animation: float 3s ease-in-out infinite; }
    .empty-text { font-size: 14px; color: #999; line-height: 1.6; }
    .empty-sub { font-size: 12px; color: #ccc; margin-top: 6px; max-width: 300px; margin-left: auto; margin-right: auto; }

    /* ‚îÄ‚îÄ Game Over ‚îÄ‚îÄ */
    .game-over {
      background: #fafafa; border: 1px solid #f0f0f0; border-radius: 12px;
      padding: 24px 20px; margin-bottom: 16px; text-align: center;
      animation: fadeIn 0.5s ease-out;
    }
    .go-emoji { font-size: 36px; margin-bottom: 8px; }
    .go-title { font-size: 24px; font-weight: 700; color: #111; margin-bottom: 4px; }
    .go-sub { font-size: 14px; color: #888; margin-bottom: 8px; }
    .go-price { font-family: 'DM Mono', monospace; font-size: 26px; color: #16a34a; font-weight: 500; margin-bottom: 8px; }
    .go-closest { font-size: 12px; color: #aaa; margin-bottom: 14px; }
    .rank-badge {
      display: inline-block; font-size: 11px; font-weight: 600; letter-spacing: 2px;
      text-transform: uppercase; border: 1px solid #e5e5e5; padding: 4px 16px;
      border-radius: 20px; margin-bottom: 12px;
    }
    .emoji-grid { margin-bottom: 16px; font-size: 20px; letter-spacing: 2px; }

    .go-btns { display: flex; justify-content: center; gap: 8px; margin-bottom: 8px; flex-wrap: wrap; }
    .share-btn {
      display: inline-block; padding: 12px 28px; background: #16a34a; border: none;
      border-radius: 8px; color: #fff; font-size: 13px; font-weight: 600;
      letter-spacing: 1px; cursor: pointer; transition: all 0.2s ease;
      box-shadow: 0 2px 8px rgba(22,163,74,0.2);
    }
    .share-btn:hover { background: #15803d; transform: translateY(-1px); }
    .play-again-btn {
      padding: 12px 24px; background: transparent; border: 1px solid #e5e5e5;
      border-radius: 8px; color: #888; font-size: 13px; font-weight: 600;
      letter-spacing: 1px; cursor: pointer; transition: all 0.2s;
    }
    .play-again-btn:hover { border-color: #ccc; background: #fafafa; }
    .go-note { font-size: 11px; color: #ccc; margin-top: 4px; }

    /* ‚îÄ‚îÄ Side Ads ‚îÄ‚îÄ */
    .side-ad {
      position: fixed; top: 50%; transform: translateY(-50%);
      width: 160px; min-height: 600px; display: none;
      align-items: center; justify-content: center;
    }
    .side-ad-left { left: calc(50% - 420px); }
    .side-ad-right { right: calc(50% - 420px); }
    @media (min-width: 1100px) { .side-ad { display: flex; } }

    /* ‚îÄ‚îÄ Post-Game Ad ‚îÄ‚îÄ */
    .ad-spot {
      background: rgba(0,0,0,0.01); border: 1px dashed #f0f0f0;
      border-radius: 4px; padding: 12px; text-align: center;
      margin: 16px 0; min-height: 90px;
      display: none; align-items: center; justify-content: center;
    }

    /* ‚îÄ‚îÄ More Games ‚îÄ‚îÄ */
    .more-games { margin-top: 28px; padding-top: 20px; border-top: 1px solid #f0f0f0; text-align: center; }
    .more-games-title { font-size: 10px; font-weight: 600; letter-spacing: 3px; text-transform: uppercase; color: #ddd; margin-bottom: 12px; }
    .game-links { display: flex; gap: 10px; justify-content: center; flex-wrap: wrap; }
    .game-link {
      display: flex; align-items: center; gap: 8px; padding: 10px 16px;
      background: #fafafa; border: 1px solid #f0f0f0; border-radius: 8px;
      text-decoration: none; color: #111; font-size: 13px; transition: all 0.2s;
    }
    .game-link:hover { border-color: #ddd; transform: translateY(-2px); box-shadow: 0 4px 12px rgba(0,0,0,0.04); }
    .game-link-icon { font-size: 20px; }
    .game-link-name { font-family: 'DM Mono', monospace; font-size: 12px; font-weight: 500; letter-spacing: 1px; }
    .game-link-desc { font-size: 10px; color: #aaa; }

    /* ‚îÄ‚îÄ Footer ‚îÄ‚îÄ */
    .footer { text-align: center; margin-top: 24px; padding-top: 12px; border-top: 1px solid #f0f0f0; }
    .footer-text { font-size: 10px; letter-spacing: 2px; text-transform: uppercase; color: #ddd; }
    .footer-links { margin-top: 6px; }
    .footer-links a { font-size: 10px; color: #ccc; text-decoration: none; margin: 0 6px; }
    .footer-links a:hover { color: #888; }

    /* ‚îÄ‚îÄ Animations ‚îÄ‚îÄ */
    @keyframes slideIn { from { opacity:0; transform:translateX(-10px); } to { opacity:1; transform:translateX(0); } }
    @keyframes fadeIn { from { opacity:0; transform:translateY(8px); } to { opacity:1; transform:translateY(0); } }
    @keyframes float { 0%,100% { transform:translateY(0); } 50% { transform:translateY(-4px); } }
    @keyframes pulse { 0%,100% { transform:scale(1); } 50% { transform:scale(1.05); } }

    .hidden { display: none !important; }

    @media (max-width: 480px) {
      .header h1 { font-size: 26px; letter-spacing: 3px; }
      .price-value { font-size: 36px; }
      .product-name { font-size: 17px; }
      .game-links { flex-direction: column; align-items: center; }
      .game-link { width: 100%; max-width: 280px; }
    }
  </style>
</head>
<body>

<div class="container">

  <div class="side-ad side-ad-left" id="ad-left"></div>
  <div class="side-ad side-ad-right" id="ad-right"></div>

  <!-- Header -->
  <header class="header">
    <div class="header-accent"></div>
    <h1>COST GUESSER</h1>
    <p class="header-sub">Guess the price ¬∑ Six attempts ¬∑ One item</p>
  </header>

  <!-- Stats -->
  <div class="stats">
    <div class="stat"><div class="stat-num" id="stat-played">0</div><div class="stat-label">Played</div></div>
    <div class="stat-div"></div>
    <div class="stat"><div class="stat-num" id="stat-wins">0</div><div class="stat-label">Wins</div></div>
    <div class="stat-div"></div>
    <div class="stat"><div class="stat-num" id="stat-avg">‚Äî</div><div class="stat-label">Avg Guesses</div></div>
  </div>

  <!-- Product Card -->
  <div class="product-card">
    <div class="product-emoji" id="product-emoji"></div>
    <div class="product-category" id="product-category"></div>
    <div class="product-name" id="product-name"></div>
  </div>

  <!-- Hint -->
  <div class="hint-card hidden" id="hint-card">
    <div class="hint-label" id="hint-label"></div>
    <div class="hint-text" id="hint-text"></div>
  </div>

  <!-- Slider -->
  <div class="slider-area" id="slider-area">
    <div class="price-display">
      <div class="price-value" id="price-value">$100</div>
      <div class="price-hint" id="price-hint">Drag to set your guess</div>
    </div>
    <div class="slider-track" id="slider-track">
      <div class="slider-rail">
        <div class="slider-fill" id="slider-fill"></div>
      </div>
      <div class="slider-thumb" id="slider-thumb"></div>
    </div>
    <div class="fine-tune">
      <button class="fine-btn" onclick="nudge(0.5)">‚àí‚àí</button>
      <button class="fine-btn" onclick="nudge(0.9)">‚àí</button>
      <button class="fine-btn" onclick="nudge(1.1)">+</button>
      <button class="fine-btn" onclick="nudge(2)">++</button>
    </div>
  </div>

  <!-- Submit -->
  <div id="submit-area">
    <button class="guess-btn" id="guess-btn" onclick="submitGuess()">Lock in $100</button>
    <div class="guess-counter" id="guess-counter">0 / 6 guesses used</div>
  </div>

  <!-- Guess History -->
  <div id="guesses-area" class="hidden" style="margin-bottom: 20px;">
    <div class="guesses-label">YOUR GUESSES</div>
    <div id="guesses-list"></div>
  </div>

  <!-- Empty State -->
  <div id="empty-state" class="empty-state">
    <div class="empty-icon">üí∞</div>
    <div class="empty-text">How much does this cost?</div>
    <div class="empty-sub">Use the slider and fine-tune buttons. You'll get higher/lower feedback plus a heat rating. Within 2% counts as correct!</div>
  </div>

  <!-- Game Over -->
  <div id="game-over" class="game-over hidden"></div>

  <!-- Ad Spot: Post-Game -->
  <div class="ad-spot" id="ad-postgame"></div>

  <!-- More Games -->
  <div class="more-games">
    <div class="more-games-title">More Games</div>
    <div class="game-links">
      <a href="https://historale.com" class="game-link" target="_blank">
        <span class="game-link-icon">üìú</span>
        <div>
          <div class="game-link-name">Historale</div>
          <div class="game-link-desc">Real or fake history?</div>
        </div>
      </a>
      <a href="#" class="game-link">
        <span class="game-link-icon">‚öñÔ∏è</span>
        <div>
          <div class="game-link-name">Coming Soon</div>
          <div class="game-link-desc">Real law or legal fiction?</div>
        </div>
      </a>
    </div>
  </div>

  <!-- Footer -->
  <footer class="footer">
    <div class="footer-text">A daily game of price intuition</div>
    <div class="footer-links">
      <a href="/about.html">About</a>
      <a href="/privacy.html">Privacy</a>
      <span style="font-size:10px;color:#e5e5e5">¬© 2026 Cost Guesser</span>
    </div>
  </footer>

</div>

<script>
// ‚îÄ‚îÄ‚îÄ Product Database ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
const PRODUCTS=[
  {name:"A Big Mac",price:5.58,category:"Fast Food",emoji:"üçî",hints:["It's sold at the world's largest fast food chain","The price varies by country ‚Äî this is the US average","It was invented in 1967 by a franchisee in Pennsylvania"]},
  {name:"A gallon of milk in the US",price:4.20,category:"Groceries",emoji:"ü•õ",hints:["It's a kitchen staple bought weekly by millions","The price has roughly doubled since the year 2000","Wisconsin and California produce the most of it"]},
  {name:"The original iPhone at launch (2007)",price:499,category:"Tech",emoji:"üì±",hints:["It was announced in January and launched in June","Steve Jobs called it 'revolutionary'","The price was cut by $200 just two months after launch"]},
  {name:"A cup of coffee at Starbucks (Grande Latte)",price:5.75,category:"Coffee",emoji:"‚òï",hints:["Grande is the medium size","It's espresso-based with steamed milk","The chain has over 35,000 locations worldwide"]},
  {name:"A Tesla Model 3 (base, 2024)",price:38990,category:"Cars",emoji:"üöó",hints:["It's the brand's most affordable sedan","It can go about 270 miles on a single charge","The company is headquartered in Austin, Texas"]},
  {name:"A Nintendo Switch (OLED model)",price:349,category:"Gaming",emoji:"üéÆ",hints:["It's a hybrid ‚Äî plays on TV and handheld","The screen upgrade was the big selling point","Mario Kart 8 is the best-selling game on this platform"]},
  {name:"A dozen eggs in the US (2024)",price:3.40,category:"Groceries",emoji:"ü•ö",hints:["Bird flu outbreaks have made prices volatile","The USDA tracks this price weekly","Iowa is America's top producing state for these"]},
  {name:"A barrel of crude oil (2024 avg)",price:78,category:"Commodities",emoji:"üõ¢Ô∏è",hints:["OPEC heavily influences this price","A barrel is exactly 42 US gallons","Texas and North Dakota are the top US producers"]},
  {name:"An oil change for a Ferrari 296 GTB",price:3250,category:"Luxury",emoji:"üèéÔ∏è",hints:["Even maintenance on these is eye-wateringly expensive","The car itself starts at around $340,000","You'll wait weeks for a dealership appointment"]},
  {name:"An iPhone 15 Pro Max (1TB)",price:1599,category:"Tech",emoji:"üì±",hints:["This is the most expensive storage tier","It was released in September 2023","The titanium frame was a new feature"]},
  {name:"A Costco hot dog and soda combo",price:1.50,category:"Fast Food",emoji:"üå≠",hints:["This price hasn't changed since 1985","The CEO once threatened to fire anyone who raised it","It includes a 20oz fountain drink with free refills"]},
  {name:"A one-bedroom apartment in Manhattan (monthly rent, 2024)",price:3800,category:"Real Estate",emoji:"üè†",hints:["This is the median, not average ‚Äî outliers skew higher","It's been climbing steadily since the post-COVID dip","Some neighborhoods easily double this figure"]},
  {name:"A first-class ticket from NYC to London",price:8500,category:"Travel",emoji:"‚úàÔ∏è",hints:["The flight is about 7 hours","Business class is roughly half this price","Lie-flat beds and multi-course meals are standard"]},
  {name:"A loaf of bread in the US",price:3.99,category:"Groceries",emoji:"üçû",hints:["White sandwich bread is the reference here","The price has risen about 30% since 2020","Americans consume roughly 3 billion loaves per year"]},
  {name:"A year of Netflix (Standard plan, 2024)",price:185.88,category:"Subscription",emoji:"üì∫",hints:["That's the monthly rate times twelve","The Standard plan includes two simultaneous streams","The company has over 260 million subscribers worldwide"]},
  {name:"A pair of Nike Air Jordan 1 Retro High OG",price:180,category:"Fashion",emoji:"üëü",hints:["First released in 1985","Michael Jordan was fined $5,000 per game for wearing the original","They're one of the best-selling sneakers of all time"]},
  {name:"The Mona Lisa (estimated insurance value)",price:870000000,category:"Art",emoji:"üñºÔ∏è",hints:["It's in the Louvre in Paris","It was stolen in 1911 and missing for two years","Da Vinci painted it in the early 1500s"]},
  {name:"A year at Harvard (tuition + fees, 2024)",price:59076,category:"Education",emoji:"üéì",hints:["Room and board adds another $20K+","About 55% of students receive financial aid","The university's endowment is over $50 billion"]},
  {name:"A Rolex Submariner (retail, 2024)",price:10100,category:"Luxury",emoji:"‚åö",hints:["Good luck finding one at retail ‚Äî waitlists are years long","The secondary market price is often 50%+ higher","It was first introduced in 1953 as a diving watch"]},
  {name:"A pound of gold (early 2024)",price:32000,category:"Commodities",emoji:"üèÖ",hints:["There are about 14.58 troy ounces in a pound","Gold hit all-time highs in 2024","Central banks are the largest buyers"]},
  {name:"A Chipotle burrito (steak, 2024)",price:11.75,category:"Fast Food",emoji:"üåØ",hints:["Steak is the most expensive protein option","Adding guac costs extra","The chain has over 3,400 locations"]},
  {name:"A gallon of gasoline in the US (2024 avg)",price:3.50,category:"Commodities",emoji:"‚õΩ",hints:["California averages about $1.50 more than this","The US consumes roughly 369 million gallons per day","The federal tax is 18.4 cents per gallon"]},
  {name:"A one-day pass to Disney World (Magic Kingdom)",price:109,category:"Entertainment",emoji:"üè∞",hints:["This is the base price ‚Äî peak days cost more","When the park opened in 1971, a ticket was $3.50","The park covers about 107 acres"]},
  {name:"A Dyson V15 Detect vacuum",price:749,category:"Home",emoji:"üßπ",hints:["It has a laser that reveals invisible dust","The company was founded by a British inventor","It uses cyclone technology instead of bags"]},
  {name:"The PS5 at launch (2020)",price:499,category:"Gaming",emoji:"üéÆ",hints:["It launched during the pandemic and was nearly impossible to buy","Scalpers were reselling for double this price","Spider-Man: Miles Morales was a launch title"]},
  {name:"A year of Spotify Premium (Individual, 2024)",price:131.88,category:"Subscription",emoji:"üéµ",hints:["That's the monthly rate times twelve","It has over 600 million users globally","The company was founded in Sweden in 2006"]},
  {name:"An avocado in the US (2024)",price:1.50,category:"Groceries",emoji:"ü•ë",hints:["Mexico supplies about 80% of US imports","Millennials were famously blamed for spending too much on these","Super Bowl Sunday is peak consumption day"]},
  {name:"A MacBook Pro 16\" M3 Max (top spec)",price:6899,category:"Tech",emoji:"üíª",hints:["This is the fully maxed-out configuration","It has 128GB of unified memory","Apple's M-series chips replaced Intel in 2020"]},
  {name:"A New York City taxi medallion (2024)",price:135000,category:"Finance",emoji:"üöï",hints:["These once sold for over $1 million in 2013","Uber and Lyft caused the price to crash","There are exactly 13,587 medallions in NYC"]},
  {name:"A USPS Forever Stamp (2024)",price:0.73,category:"Miscellaneous",emoji:"üìÆ",hints:["The price went up in July 2024","It can be used regardless of future price increases","Americans mailed about 116 billion pieces in 2023"]},
  {name:"A human kidney on the black market (estimated)",price:150000,category:"Black Market",emoji:"ü´ò",hints:["This is obviously illegal virtually everywhere","The legal waitlist in the US has over 90,000 people","Iran is the only country with a legal market for this"]},
  {name:"A Boeing 737 MAX 8",price:121600000,category:"Aviation",emoji:"‚úàÔ∏è",hints:["This is the list price ‚Äî airlines negotiate heavy discounts","It seats about 162-210 passengers","Southwest Airlines is the largest operator of this family"]},
  {name:"A Stanley Quencher tumbler (40oz)",price:45,category:"Trending",emoji:"ü•§",hints:["It went viral on TikTok in 2023","Originally a niche hiking product from 1913","Target releases often cause stampedes"]},
  {name:"An Oscar statuette (manufacturing cost)",price:400,category:"Entertainment",emoji:"üèÜ",hints:["It's made of gold-plated bronze on a black metal base","Winners can't sell them ‚Äî they must offer to sell back for $1","It weighs about 8.5 pounds"]},
  {name:"The fine for chewing gum in Singapore",price:1000,category:"Law",emoji:"ü´ß",hints:["Singapore banned the sale of chewing gum in 1992","Therapeutic gum is allowed with a prescription","First-time offenders get this fine; repeat offenders face more"]},
  {name:"A banana duct-taped to a wall (Maurizio Cattelan, 2019)",price:120000,category:"Art",emoji:"üçå",hints:["It's literally a banana duct-taped to a wall","It was sold at Art Basel Miami","Another artist ate the banana as a 'performance'"]},
  {name:"A wedding in the US (average cost, 2024)",price:35000,category:"Events",emoji:"üíí",hints:["This doesn't include the honeymoon","The venue is typically the single biggest expense","New York and New Jersey have the highest averages"]},
  {name:"A liter of printer ink (estimated)",price:2700,category:"Tech",emoji:"üñ®Ô∏è",hints:["This makes it more expensive per liter than gold","Printers are often sold at a loss to lock you into buying this","Third-party alternatives exist but manufacturers fight them"]},
  {name:"The International Space Station (total cost)",price:150000000000,category:"Space",emoji:"üõ∏",hints:["It's the most expensive object ever built","15 nations contributed to its construction","It orbits Earth every 90 minutes at 17,500 mph"]},
  {name:"A Subway footlong (classic sub, 2024)",price:8.49,category:"Fast Food",emoji:"ü•ñ",hints:["The famous $5 footlong is long gone","There was a lawsuit about whether it's actually 12 inches","The chain has more locations worldwide than McDonald's"]},
  {name:"A purebred French Bulldog puppy",price:3500,category:"Pets",emoji:"üêï",hints:["They became the most popular US dog breed in 2023","They often require C-section births, driving up costs","Lady Gaga's dog walker was shot during a theft of hers"]},
  {name:"A Super Bowl 30-second ad (2024)",price:7000000,category:"Advertising",emoji:"üì∫",hints:["The price has roughly doubled in the last decade","About 123 million people watched the 2024 game","The first Super Bowl ad in 1967 cost about $40,000"]},
  {name:"A ticket to space with Blue Origin",price:450000,category:"Space",emoji:"üöÄ",hints:["The flight lasts about 11 minutes total","You experience weightlessness for about 3-4 minutes","Jeff Bezos's company runs the program"]},
  {name:"A Birkin bag by Herm√®s (Togo leather, 25cm)",price:11400,category:"Luxury",emoji:"üëú",hints:["There's no official waitlist ‚Äî you need a 'purchase history'","Named after actress Jane Birkin","Some rare versions have sold at auction for over $300,000"]},
  {name:"A parking spot in Manhattan (monthly)",price:600,category:"Real Estate",emoji:"üÖøÔ∏è",hints:["Some garages in Midtown charge much more","A purchased spot can cost over $1 million","Only about 22% of Manhattan households own a car"]},
  {name:"Insulin (one vial, US list price, 2023)",price:98.70,category:"Healthcare",emoji:"üíâ",hints:["The same vial costs about $10 in Canada","The Inflation Reduction Act capped copays at $35 for Medicare","It was discovered in 1921 and the patent sold for $1"]},
  {name:"A square watermelon in Japan",price:200,category:"Food",emoji:"üçâ",hints:["They're grown in square molds for aesthetic display","They're not actually meant to be eaten ‚Äî they're decorative","Regular watermelons in Japan cost about $15-25"]},
  {name:"Elon Musk's Twitter acquisition (2022)",price:44000000000,category:"Business",emoji:"üê¶",hints:["He initially tried to back out of the deal","The platform was later renamed to X","He took the company private after buying it"]},
  {name:"A New York City MetroCard single ride",price:2.90,category:"Transport",emoji:"üöá",hints:["An unlimited monthly pass is $33","The system carries about 3.6 million riders per weekday","It was introduced as a replacement for tokens in 1993"]},
  {name:"A pint of Guinness in Dublin",price:6.50,category:"Drinks",emoji:"üç∫",hints:["Tourism has pushed prices up significantly","The Guinness Storehouse is Ireland's top tourist attraction","It's cheaper outside the Temple Bar area"]},
  {name:"An acre of farmland in Iowa (2024)",price:11200,category:"Real Estate",emoji:"üåæ",hints:["Iowa has some of the most valuable farmland in the US","Corn and soybeans are the primary crops","Prices have roughly tripled since 2005"]},
  {name:"A custom-built gaming PC (high-end, 2024)",price:3000,category:"Tech",emoji:"üñ•Ô∏è",hints:["The GPU alone can cost $1,000+","RTX 4090 is the flagship graphics card","Water cooling is popular at this price point"]},
  {name:"A taxi ride from JFK to Manhattan",price:70,category:"Transport",emoji:"üöï",hints:["This is the flat rate ‚Äî no meter","Tolls and tip are extra","The ride takes 45-90 minutes depending on traffic"]},
  {name:"An MRI scan in the US (without insurance)",price:2600,category:"Healthcare",emoji:"üè•",hints:["The same scan costs about $300 in Spain","Prices vary wildly ‚Äî some US facilities charge under $500","The technology uses powerful magnets, not radiation"]},
  {name:"A pineapple in 1800s England (adjusted for inflation)",price:8000,category:"History",emoji:"üçç",hints:["They were so rare they were rented out as table decorations","People would carry them around as a status symbol","Pineapple motifs in architecture date from this era of luxury"]},
  {name:"A 30-second TikTok ad (per 1000 views)",price:10,category:"Advertising",emoji:"üì≤",hints:["CPM means 'cost per mille' ‚Äî per thousand impressions","TikTok has over 1 billion monthly active users","The minimum campaign budget starts at $500"]},
  {name:"A human-sized hamster wheel desk",price:8000,category:"Weird",emoji:"üêπ",hints:["It's called the Hamster Wheel Standing Desk","It was sold by Hammacher Schlemmer","It's about 6 feet in diameter"]},
  {name:"A Mass of saffron (1 gram)",price:12,category:"Food",emoji:"üå∏",hints:["It takes 150 flowers to make a single gram","It's the most expensive spice in the world by weight","Most of the world's supply comes from Iran"]},
  {name:"A single parking spot in Hong Kong (purchased)",price:1300000,category:"Real Estate",emoji:"üÖøÔ∏è",hints:["Hong Kong has the world's most expensive parking","This was an actual sale in the Mount Nicholson development","That's more than a house in most countries"]},
  {name:"A Bugatti Chiron",price:3000000,category:"Cars",emoji:"üèéÔ∏è",hints:["It has a quad-turbocharged W16 engine with 1,500 horsepower","Top speed is electronically limited to 261 mph","Only about 500 were made"]},
  {name:"The world's most expensive pizza (Louis XIII)",price:12000,category:"Food",emoji:"üçï",hints:["It's made in Salerno, Italy","Topped with three types of caviar and lobster","A chef comes to your home to prepare it"]},
  {name:"A gram of antimatter",price:62500000000000,category:"Science",emoji:"‚öõÔ∏è",hints:["It's the most expensive substance on Earth by far","NASA produces tiny amounts for research","Just one gram could power a trip to Mars"]},
  {name:"A private island in the Bahamas (avg)",price:15000000,category:"Real Estate",emoji:"üèùÔ∏è",hints:["Prices range wildly from $500K to $100M+","Johnny Depp owns one","Many don't include any buildings ‚Äî just raw land"]},
  {name:"A can of Red Bull",price:2.49,category:"Drinks",emoji:"ü•´",hints:["The company sells over 12 billion cans per year","It was inspired by a Thai energy drink called Krating Daeng","The founder became one of the richest people in Austria"]},
  {name:"The Hope Diamond (estimated value)",price:350000000,category:"Luxury",emoji:"üíé",hints:["It's 45.52 carats and deep blue","It's been at the Smithsonian since 1958","Legend says it carries a curse"]},
  {name:"A Wendy's Baconator",price:9.29,category:"Fast Food",emoji:"üçî",hints:["It has six strips of bacon and two beef patties","It was introduced in 2007","It contains about 960 calories"]},
  {name:"The London Eye (construction cost)",price:100000000,category:"Architecture",emoji:"üé°",hints:["It was originally planned as a temporary structure","It opened on New Year's Eve 1999","A single rotation takes exactly 30 minutes"]},
  {name:"A human body (chemical value of raw elements)",price:1,category:"Science",emoji:"üß¨",hints:["You're mostly oxygen, carbon, hydrogen, and nitrogen","About 60% of you is water","The elements are worth almost nothing individually"]},
  {name:"The most expensive domain name ever sold (cars.com)",price:872000000,category:"Tech",emoji:"üåê",hints:["The sale included the business, not just the URL","It was acquired by Gannett in 2014","Domain-only sales rarely exceed $30 million"]},
  {name:"A gram of scorpion venom",price:39000000,category:"Science",emoji:"ü¶Ç",hints:["It's one of the most expensive liquids on Earth","It contains proteins used in cancer research","Milking a scorpion yields just 0.5mg at a time"]},
  {name:"An ambulance ride in the US (average)",price:1200,category:"Healthcare",emoji:"üöë",hints:["This is just for the ride ‚Äî treatment is extra","Some air ambulances cost $40,000+","Many insurance plans don't fully cover it"]},
  {name:"A gallon of Chanel No. 5 perfume",price:26000,category:"Luxury",emoji:"üß¥",hints:["It was created in 1921 by perfumer Ernest Beaux","Marilyn Monroe famously said she wore only this to bed","About 30 million bottles are sold each year"]},
  {name:"A full suit of medieval plate armor (museum reproduction)",price:15000,category:"History",emoji:"‚öîÔ∏è",hints:["A historical original could cost $500,000+","A full set weighs 45-55 pounds","Knights needed help from squires to put it on"]},
  {name:"A 30-day supply of the most expensive drug (Zolgensma, per dose)",price:2125000,category:"Healthcare",emoji:"üíä",hints:["It's a one-time gene therapy for spinal muscular atrophy","It's the most expensive single drug treatment in the world","It was approved by the FDA in 2019"]},
  {name:"A NBA courtside seat (Lakers, regular season)",price:2500,category:"Entertainment",emoji:"üèÄ",hints:["Playoff games can cost 5-10x more","Jack Nicholson's seats are reportedly worth $150K/season","You're close enough to get bumped by players"]},
  {name:"The Voyager 1 space probe (total mission cost)",price:865000000,category:"Space",emoji:"üõ∞Ô∏è",hints:["Launched in 1977 and still transmitting","It's the farthest human-made object from Earth","It takes over 22 hours for its signal to reach us"]},
  {name:"A Times Square billboard (1 month)",price:300000,category:"Advertising",emoji:"üåÉ",hints:["Prime spots can cost over $1M/month","About 330,000 people pass through daily","The most iconic is the Nasdaq tower display"]},
  {name:"A kilogram of white truffle",price:6000,category:"Food",emoji:"üçÑ",hints:["They can't be farmed ‚Äî only foraged by trained dogs or pigs","They grow underground near tree roots in Italy","The largest ever sold at auction went for $330,000"]},
  {name:"The Panama Canal (original construction cost, inflation-adjusted)",price:14000000000,category:"History",emoji:"üö¢",hints:["It took 10 years to build (1904-1914)","About 27,000 workers died during French and American construction","It processes about 14,000 ships per year"]},
  {name:"Aflix of vanilla extract (pure, 1oz)",price:4.50,category:"Groceries",emoji:"ü´ô",hints:["Most vanilla comes from Madagascar","It's the second most expensive spice after saffron","Imitation vanilla costs about 75% less"]},
  {name:"A private jet flight NYC to LA (chartered)",price:35000,category:"Travel",emoji:"üõ©Ô∏è",hints:["This is a one-way light jet charter","A heavy jet with more seats costs $60,000+","First class commercial is about $2,500 for comparison"]},
  {name:"The Hubble Space Telescope (total cost through 2020)",price:16000000000,category:"Space",emoji:"üî≠",hints:["Originally estimated at $400 million","It was launched in 1990 with a flawed mirror","It orbits at 340 miles above Earth"]},
  {name:"A single LEGO brick (retail cost from a set)",price:0.10,category:"Toys",emoji:"üß±",hints:["LEGO produces about 36 billion bricks per year","The molds are accurate to within 2 micrometers","Walking on one barefoot is universally painful"]},
  {name:"The average American's lifetime healthcare spending",price:316600,category:"Healthcare",emoji:"üè•",hints:["About a third is spent in the last year of life","The US spends more per capita than any other country","This doesn't include insurance premiums"]},
  {name:"A penguin (price from a licensed exotic dealer)",price:30000,category:"Pets",emoji:"üêß",hints:["They're legal to own in some US states","They need constant refrigeration and a pool","Annual upkeep can cost $10,000+"]},
  {name:"A shipping container (standard 40ft, new)",price:5000,category:"Business",emoji:"üì¶",hints:["During the 2021 shipping crisis these hit $20,000+","There are about 17 million in circulation worldwide","Tiny home conversions are increasingly popular"]},
  {name:"The cost to raise a child in the US (birth to 17)",price:310605,category:"Life",emoji:"üë∂",hints:["This is the USDA estimate ‚Äî doesn't include college","Housing is the biggest single expense","Costs vary wildly by region and income level"]},
  {name:"A Super Bowl ring (manufacturing cost)",price:50000,category:"Sports",emoji:"üíç",hints:["Players get them for free ‚Äî paid for by the team","Most contain 100+ diamonds","Some players' rings have sold at auction for $250K+"]},
  {name:"One Bitcoin at its all-time high (Nov 2024)",price:99800,category:"Finance",emoji:"‚Çø",hints:["It nearly touched $100,000","Satoshi Nakamoto mined the first block in 2009","El Salvador made it legal tender in 2021"]},
];

// ‚îÄ‚îÄ‚îÄ State ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
const MAX_GUESSES = 6;
let sliderValue = 100;
let guesses = [];
let gameOver = false;
let won = false;
let isDragging = false;
let currentProduct = null;
let rangeMin, rangeMax, logMin, logMax;

// Persistent stats
let totalPlayed = parseInt(localStorage.getItem('cg-played') || '0');
let totalWins = parseInt(localStorage.getItem('cg-wins') || '0');
let totalGuesses = parseInt(localStorage.getItem('cg-totalguesses') || '0');

// ‚îÄ‚îÄ‚îÄ Day-based product selection ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function getDayNumber() {
  const start = new Date(2025, 0, 1);
  const now = new Date(); now.setHours(0,0,0,0);
  return Math.floor((now - start) / 86400000);
}

function getProductIndex() {
  const day = getDayNumber();
  let s = day * 48271 + 97;
  s = (s * 16807) % 2147483647;
  return Math.floor(((s - 1) / 2147483646) * PRODUCTS.length);
}

// ‚îÄ‚îÄ‚îÄ Price Formatting ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function fmtPrice(p) {
  if (p >= 1000000000) return "$" + (p / 1000000000).toFixed(1) + "B";
  if (p >= 1000000) return "$" + (p / 1000000).toFixed(1) + "M";
  if (p >= 100) return "$" + Math.round(p).toLocaleString();
  if (p >= 1) return "$" + p.toFixed(2);
  return "$" + p.toFixed(2);
}
function fmtPriceFull(p) {
  if (p >= 1) return "$" + p.toLocaleString(undefined, { minimumFractionDigits: p % 1 !== 0 ? 2 : 0, maximumFractionDigits: 2 });
  return "$" + p.toFixed(2);
}

// ‚îÄ‚îÄ‚îÄ Heat / Feedback ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function getHeat(pctOff) {
  if (pctOff === 0) return { text: "EXACT", color: "#16a34a" };
  if (pctOff <= 5) return { text: "Scorching!", color: "#eab308" };
  if (pctOff <= 15) return { text: "Very warm", color: "#f59e0b" };
  if (pctOff <= 30) return { text: "Warm", color: "#f97316" };
  if (pctOff <= 50) return { text: "Cool", color: "#c2410c" };
  if (pctOff <= 80) return { text: "Cold", color: "#6366f1" };
  return { text: "Freezing!", color: "#818cf8" };
}
function getEmoji(pctOff) {
  if (pctOff === 0) return "üü¢";
  if (pctOff <= 10) return "üü°";
  if (pctOff <= 30) return "üü†";
  if (pctOff <= 60) return "üî¥";
  return "‚ö´";
}
function getLabel(n) {
  if (n === 1) return "Price Savant";
  if (n === 2) return "Appraiser";
  if (n === 3) return "Shopper";
  if (n === 4) return "Browser";
  if (n === 5) return "Haggler";
  return "Window Shopper";
}

// ‚îÄ‚îÄ‚îÄ Slider Logic ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function setupSlider(targetPrice) {
  const mag = Math.pow(10, Math.floor(Math.log10(targetPrice)));
  rangeMin = Math.max(0.01, mag / 100);
  rangeMax = mag * 100;
  logMin = Math.log10(rangeMin);
  logMax = Math.log10(rangeMax);
  sliderValue = mag;
  updateSliderUI();
}

function valToPercent(v) {
  return ((Math.log10(Math.max(v, rangeMin)) - logMin) / (logMax - logMin)) * 100;
}
function percentToVal(pct) {
  const logVal = logMin + (pct / 100) * (logMax - logMin);
  const raw = Math.pow(10, logVal);
  if (raw >= 1000000) return Math.round(raw / 1000000) * 1000000;
  if (raw >= 100000) return Math.round(raw / 100000) * 100000;
  if (raw >= 10000) return Math.round(raw / 1000) * 1000;
  if (raw >= 1000) return Math.round(raw / 100) * 100;
  if (raw >= 100) return Math.round(raw / 10) * 10;
  if (raw >= 10) return Math.round(raw);
  if (raw >= 1) return Math.round(raw * 10) / 10;
  return Math.round(raw * 100) / 100;
}

function updateSliderUI() {
  const pct = valToPercent(sliderValue);
  document.getElementById('slider-fill').style.width = pct + '%';
  document.getElementById('slider-thumb').style.left = pct + '%';
  document.getElementById('price-value').textContent = fmtPrice(sliderValue);
  document.getElementById('price-value').className = 'price-value' + (isDragging ? ' dragging' : '');
  document.getElementById('price-hint').textContent = isDragging ? 'Release to set price' : 'Drag to set your guess';
  document.getElementById('guess-btn').textContent = 'Lock in ' + fmtPrice(sliderValue);
}

// Slider events
const track = document.getElementById('slider-track');

function getValFromEvent(e) {
  if (!track) return sliderValue;
  const rect = track.getBoundingClientRect();
  const clientX = e.touches ? e.touches[0].clientX : e.clientX;
  const pct = Math.max(0, Math.min(100, ((clientX - rect.left) / rect.width) * 100));
  return percentToVal(pct);
}

if (track) {
  track.addEventListener('mousedown', function(e) { if (gameOver) return; e.preventDefault(); isDragging = true; sliderValue = getValFromEvent(e); updateSliderUI(); document.getElementById('slider-thumb').classList.add('dragging'); });
  track.addEventListener('touchstart', function(e) { if (gameOver) return; e.preventDefault(); isDragging = true; sliderValue = getValFromEvent(e); updateSliderUI(); document.getElementById('slider-thumb').classList.add('dragging'); }, {passive:false});
}

window.addEventListener('mousemove', e => { if (!isDragging) return; e.preventDefault(); sliderValue = getValFromEvent(e); updateSliderUI(); });
window.addEventListener('touchmove', e => { if (!isDragging) return; e.preventDefault(); sliderValue = getValFromEvent(e); updateSliderUI(); }, {passive:false});
window.addEventListener('mouseup', () => { isDragging = false; updateSliderUI(); document.getElementById('slider-thumb').classList.remove('dragging'); });
window.addEventListener('touchend', () => { isDragging = false; updateSliderUI(); document.getElementById('slider-thumb').classList.remove('dragging'); });

function nudge(factor) {
  if (gameOver) return;
  sliderValue = Math.max(rangeMin, Math.min(rangeMax, percentToVal(valToPercent(sliderValue * factor))));
  updateSliderUI();
}

// ‚îÄ‚îÄ‚îÄ Game Logic ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function submitGuess() {
  if (gameOver) return;
  const target = currentProduct.price;
  const guess = sliderValue;
  const pctOff = Math.round(Math.abs(guess - target) / target * 100);
  const direction = guess > target ? "lower" : guess < target ? "higher" : "correct";
  const isCorrect = pctOff <= 2;

  guesses.push({ price: guess, pctOff, direction, isCorrect });

  if (isCorrect) {
    won = true; gameOver = true;
  } else if (guesses.length >= MAX_GUESSES) {
    gameOver = true;
  }

  renderGuesses();
  renderHint();

  if (gameOver) {
    totalPlayed++; localStorage.setItem('cg-played', totalPlayed);
    if (won) { totalWins++; localStorage.setItem('cg-wins', totalWins); totalGuesses += guesses.length; localStorage.setItem('cg-totalguesses', totalGuesses); }
    renderGameOver();
    updateStats();
  }
}

function renderGuesses() {
  document.getElementById('empty-state').classList.add('hidden');
  document.getElementById('guesses-area').classList.remove('hidden');
  const list = document.getElementById('guesses-list');

  // Add latest guess
  const g = guesses[guesses.length - 1];
  const heat = getHeat(g.pctOff);
  const row = document.createElement('div');
  row.className = 'guess-row' + (g.isCorrect ? ' correct' : '');
  row.style.borderLeft = '4px solid ' + heat.color;

  if (g.isCorrect) {
    row.innerHTML = `<span class="guess-num">#${guesses.length}</span><span class="guess-price">${fmtPrice(g.price)}</span><span class="guess-feedback"><span class="guess-correct-label">‚úì CORRECT</span></span>`;
  } else {
    row.innerHTML = `<span class="guess-num">#${guesses.length}</span><span class="guess-price">${fmtPrice(g.price)}</span><span class="guess-feedback"><span class="guess-heat" style="color:${heat.color}">${heat.text}</span><span class="guess-dir">Go <strong>${g.direction}</strong></span><span class="guess-arrow" style="color:${heat.color}">${g.direction==='higher'?'‚Üë':'‚Üì'}</span></span>`;
  }
  list.appendChild(row);

  // Update counter
  document.getElementById('guess-counter').textContent = guesses.length + ' / ' + MAX_GUESSES + ' guesses used';

  if (gameOver) {
    document.getElementById('submit-area').classList.add('hidden');
    document.getElementById('slider-area').style.opacity = '0.35';
    document.getElementById('slider-area').style.pointerEvents = 'none';
  }
}

function renderHint() {
  const hintIdx = Math.min(guesses.length - 1, 2);
  if (!gameOver && guesses.length > 0 && guesses.length < MAX_GUESSES && currentProduct.hints && currentProduct.hints[hintIdx]) {
    document.getElementById('hint-card').classList.remove('hidden');
    document.getElementById('hint-label').textContent = 'CLUE ' + Math.min(guesses.length, 3) + ' of 3';
    document.getElementById('hint-text').textContent = currentProduct.hints[hintIdx];
  } else {
    document.getElementById('hint-card').classList.add('hidden');
  }
}

function renderGameOver() {
  const target = currentProduct.price;
  const el = document.getElementById('game-over');
  el.classList.remove('hidden');
  document.getElementById('ad-postgame').style.display = 'flex';

  const emojiGrid = guesses.map(g => getEmoji(g.pctOff)).join(' ');
  const closest = guesses.reduce((best, g) => g.pctOff < best.pctOff ? g : best);

  let html = '';
  if (won) {
    const title = guesses.length === 1 ? "Unbelievable!" : guesses.length <= 3 ? "Impressive!" : "Nice one!";
    html = `
      <div class="go-emoji">üéØ</div>
      <div class="go-title">${title}</div>
      <div class="go-sub">You nailed it in ${guesses.length} ${guesses.length===1?'guess':'guesses'}</div>
      <div class="rank-badge" style="border-color:#bbf7d0;color:#16a34a">${getLabel(guesses.length)}</div><br>
      <div class="go-price">${fmtPriceFull(target)}</div>
    `;
  } else {
    html = `
      <div class="go-emoji">üí∏</div>
      <div class="go-title">Not quite!</div>
      <div class="go-sub">The actual price is</div>
      <div class="go-price">${fmtPriceFull(target)}</div>
      <div class="go-closest">Closest guess: ${fmtPrice(closest.price)} (${closest.pctOff}% off)</div>
    `;
  }

  html += `<div class="emoji-grid">${emojiGrid}</div>`;
  html += `<div class="go-btns">
    <button class="share-btn" id="share-btn" onclick="shareResult()">üìã Share result</button>
    <button class="play-again-btn" onclick="playRandom()">Next item ‚Üí</button>
  </div>`;
  html += `<div class="go-note">89 items to guess ‚Äî how many can you nail?</div>`;

  el.innerHTML = html;
}

function shareResult() {
  const dayNum = getDayNumber();
  const emojiGrid = guesses.map(g => getEmoji(g.pctOff)).join(' ');
  const result = won
    ? `Cost Guesser üí∞ ‚Äî ${guesses.length}/${MAX_GUESSES}\n${emojiGrid}\nhttps://costguesser.com`
    : `Cost Guesser üí∞ ‚Äî X/${MAX_GUESSES}\n${emojiGrid}\nhttps://costguesser.com`;

  if (navigator.share) {
    navigator.share({ title: 'Cost Guesser', text: result }).catch(() => {});
  } else if (navigator.clipboard) {
    navigator.clipboard.writeText(result);
    document.getElementById('share-btn').textContent = '‚úì Copied!';
    setTimeout(() => { document.getElementById('share-btn').textContent = 'üìã Share result'; }, 2500);
  }
}

function playRandom() {
  let idx = Math.floor(Math.random() * PRODUCTS.length);
  const currentIdx = PRODUCTS.indexOf(currentProduct);
  while (idx === currentIdx) idx = Math.floor(Math.random() * PRODUCTS.length);
  startGame(idx);
}

function updateStats() {
  document.getElementById('stat-played').textContent = totalPlayed;
  document.getElementById('stat-wins').textContent = totalWins;
  document.getElementById('stat-avg').textContent = totalWins > 0 ? (totalGuesses / totalWins).toFixed(1) : '‚Äî';
}

// ‚îÄ‚îÄ‚îÄ Init ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function startGame(idx) {
  currentProduct = PRODUCTS[idx];
  guesses = [];
  gameOver = false;
  won = false;

  document.getElementById('product-emoji').textContent = currentProduct.emoji;
  document.getElementById('product-category').textContent = currentProduct.category;
  document.getElementById('product-name').textContent = currentProduct.name;

  setupSlider(currentProduct.price);

  document.getElementById('guesses-area').classList.add('hidden');
  document.getElementById('guesses-list').innerHTML = '';
  document.getElementById('game-over').classList.add('hidden');
  document.getElementById('game-over').innerHTML = '';
  document.getElementById('submit-area').classList.remove('hidden');
  document.getElementById('empty-state').classList.remove('hidden');
  document.getElementById('hint-card').classList.add('hidden');
  document.getElementById('ad-postgame').style.display = 'none';
  document.getElementById('slider-area').style.opacity = '1';
  document.getElementById('slider-area').style.pointerEvents = 'auto';
  document.getElementById('guess-counter').textContent = '0 / 6 guesses used';

  updateStats();
  window.scrollTo({ top: 0, behavior: 'smooth' });
}

startGame(Math.floor(Math.random() * PRODUCTS.length));
</script>

</body>
</html>
